{% extends "base.html" %}

{% block content %}
  <section class="card">
    <div class="inline" style="margin-bottom:.75rem; gap:1rem;">
      <strong>Admin:</strong>
      <a href="{{ url_for('admin.employees_list') }}">Empleados</a>
      <a href="{{ url_for('admin.shifts') }}">Turnos</a>
    </div>

    <h1>Turnos</h1>
    <p><strong>Sugerencias:</strong> General, Media jornada, Fin de semana.</p>

    <form method="post">
      {{ form.hidden_tag() }}
      <label for="{{ form.name.id }}">Nombre del turno</label>
      {{ form.name(placeholder='General') }}

      <label for="{{ form.break_counts_as_work.id }}" style="display:flex; align-items:center; gap:.45rem;">
        {{ form.break_counts_as_work(style='width:auto;') }}
        <span>El descanso es parte de la jornada laboral</span>
        <span title="En caso de no contar como tiempo laboral se restarà del tiempo de trabajo" style="cursor:help; border:1px solid var(--border); border-radius:999px; width:1.2rem; height:1.2rem; display:inline-flex; align-items:center; justify-content:center;">?</span>
      </label>

      <label for="{{ form.break_minutes.id }}">Número de minutos de descanso</label>
      {{ form.break_minutes(min='0') }}

      <label for="{{ form.expected_hours.id }}">Horas trabajadas</label>
      {{ form.expected_hours(min='0') }}

      <label for="{{ form.expected_hours_period.id }}">Periodo</label>
      {{ form.expected_hours_period() }}

      <div style="margin-top:1rem;">
        <button type="submit">Crear turno</button>
      </div>
    </form>
  </section>

  <section class="card">
    <h2>Listado de turnos</h2>
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Descanso cuenta</th>
          <th>Minutos descanso</th>
          <th>Horas esperadas</th>
        </tr>
      </thead>
      <tbody>
        {% for shift in shifts %}
          <tr>
            <td>{{ shift.name }}</td>
            <td>{{ 'Sí' if shift.break_counts_as_work else 'No' }}</td>
            <td>{{ shift.break_minutes }}</td>
            <td>{{ shift.expected_hours }} / {{ shift.expected_hours_period.value }}</td>
          </tr>
        {% else %}
          <tr><td colspan="4">No hay turnos todavía.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
{% endblock %}
